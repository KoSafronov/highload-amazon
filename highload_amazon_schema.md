#### Таблица `users` (Пользователи)

**Назначение:** Хранение данных зарегистрированных пользователей

**СУБД:** PostgreSQL (шардированная)

**Индексы:**

- PRIMARY KEY (`user_id`)
- UNIQUE (`email`)
- UNIQUE (`phone`)
- INDEX (`is_blocked`)

| Поле          | Тип       | Описание                      |   Размер (байт) |
|:--------------|:----------|:------------------------------|----------------:|
| user_id       | UUID (PK) | Уникальный идентификатор      |              16 |
| name          | VARCHAR   | Полное имя                    |              50 |
| email         | VARCHAR   | Электронная почта (уникальн.) |              50 |
| phone         | VARCHAR   | Телефон (уникальный)          |              15 |
| password_hash | VARCHAR   | Хеш пароля                    |              64 |
| is_blocked    | BOOLEAN   | Статус блокировки             |               1 |
| created_at    | TIMESTAMP | Дата создания                 |               8 |
| updated_at    | TIMESTAMP | Дата обновления               |               8 |
| metadata      | JSONB     | Доп. метаданные               |             100 |

**Итого:** 312 байт на запись


---

#### Таблица `sellers` (Продавцы)

**Назначение:** Хранение информации о продавцах

**СУБД:** PostgreSQL

**Индексы:**

- PRIMARY KEY (`seller_id`)
- INDEX (`contact_email`)
- INDEX (`is_verified`)

| Поле              | Тип       | Описание                 |   Размер (байт) |
|:------------------|:----------|:-------------------------|----------------:|
| seller_id         | UUID (PK) | Уникальный идентификатор |              16 |
| company_name      | VARCHAR   | Название компании        |              50 |
| contact_email     | VARCHAR   | Контактная почта         |              50 |
| contact_phone     | VARCHAR   | Контактный телефон       |              15 |
| is_verified       | BOOLEAN   | Статус верификации       |               1 |
| seller_rating_sum | DECIMAL   | Сумма оценок             |               8 |
| created_at        | TIMESTAMP | Дата создания            |               8 |
| updated_at        | TIMESTAMP | Дата обновления          |               8 |

**Итого:** 156 байт на запись


---

#### Таблица `products` (Товары)

**Назначение:** Каталог товаров, доступных к продаже

**СУБД:** PostgreSQL + Redis кэш

**Индексы:**

- PRIMARY KEY (`product_id`)
- INDEX (`seller_id`)
- FULLTEXT (`name`)
- INDEX (`created_at`)

| Поле               | Тип       | Описание                        |   Размер (байт) |
|:-------------------|:----------|:--------------------------------|----------------:|
| product_id         | UUID (PK) | Уникальный идентификатор товара |              16 |
| seller_id          | UUID      | Идентификатор продавца          |              16 |
| name               | VARCHAR   | Название товара                 |             100 |
| description_short  | VARCHAR   | Краткое описание                |             100 |
| description_full   | TEXT      | Полное описание                 |             500 |
| price              | DECIMAL   | Цена                            |               8 |
| discount_price     | DECIMAL   | Цена со скидкой                 |               8 |
| main_image_url     | VARCHAR   | Ссылка на главное изображение   |             200 |
| gallery_image_urls | VARCHAR[] | Галерея изображений             |             300 |
| is_age_restricted  | BOOLEAN   | Возрастное ограничение          |               1 |
| sum_rating         | DECIMAL   | Сумма рейтингов                 |               8 |
| created_at         | TIMESTAMP | Дата создания                   |               8 |
| updated_at         | TIMESTAMP | Дата обновления                 |               8 |

**Итого:** 1273 байт на запись


---

#### Таблица `characteristics_product` (Характеристики товаров)

**Назначение:** Хранение технических характеристик товаров

**СУБД:** PostgreSQL

**Индексы:**

- PRIMARY KEY (`characteristic_id`)
- INDEX (`product_id`)

| Поле              | Тип       | Описание                 |   Размер (байт) |
|:------------------|:----------|:-------------------------|----------------:|
| characteristic_id | UUID (PK) | Уникальный идентификатор |              16 |
| product_id        | UUID      | Идентификатор товара     |              16 |
| name              | VARCHAR   | Название характеристики  |              50 |
| value             | VARCHAR   | Значение                 |              50 |
| ed_izmereniya     | VARCHAR   | Единица измерения        |              20 |

**Итого:** 152 байт на запись


---

#### Таблица `categories` (Категории)

**Назначение:** Структура категорий товаров

**СУБД:** PostgreSQL

**Индексы:**

- PRIMARY KEY (`category_id`)
- INDEX (`parent_id`)

| Поле          | Тип       | Описание                 |   Размер (байт) |
|:--------------|:----------|:-------------------------|----------------:|
| category_id   | UUID (PK) | Уникальный идентификатор |              16 |
| name          | VARCHAR   | Название категории       |              50 |
| path          | VARCHAR   | Путь до категории        |             100 |
| parent_id     | UUID      | Родительская категория   |              16 |
| product_count | INTEGER   | Количество товаров       |               4 |

**Итого:** 186 байт на запись


---

#### Таблица `product_categories` (Категории товаров)

**Назначение:** Связь между товарами и категориями

**СУБД:** PostgreSQL

**Индексы:**

- PRIMARY KEY (`product_id`, `category_id`)

| Поле        | Тип   | Описание                |   Размер (байт) |
|:------------|:------|:------------------------|----------------:|
| category_id | UUID  | Идентификатор категории |              16 |
| product_id  | UUID  | Идентификатор товара    |              16 |

**Итого:** 32 байт на запись


---

#### Таблица `orders` (Заказы)

**Назначение:** Хранение заказов пользователей

**СУБД:** PostgreSQL (шардированная)

**Индексы:**

- PRIMARY KEY (`order_id`)
- INDEX (`user_id`)
- INDEX (`created_at`)

| Поле          | Тип       | Описание                        |   Размер (байт) |
|:--------------|:----------|:--------------------------------|----------------:|
| order_id      | UUID (PK) | Уникальный идентификатор заказа |              16 |
| user_id       | UUID      | Идентификатор пользователя      |              16 |
| status        | VARCHAR   | Статус заказа                   |              20 |
| subtotal      | DECIMAL   | Промежуточная сумма             |               8 |
| tax           | DECIMAL   | Налог                           |               8 |
| shipping_cost | DECIMAL   | Стоимость доставки              |               8 |
| total         | DECIMAL   | Общая сумма                     |               8 |
| created_at    | TIMESTAMP | Дата создания                   |               8 |
| updated_at    | TIMESTAMP | Дата обновления                 |               8 |

**Итого:** 100 байт на запись


---

#### Таблица `order_items` (Состав заказа)

**Назначение:** Хранение информации о товарах в заказе

**СУБД:** PostgreSQL (шардированная)

**Индексы:**

- PRIMARY KEY (`order_item_id`)
- INDEX (`order_id`)
- INDEX (`product_id`)

| Поле          | Тип       | Описание                         |   Размер (байт) |
|:--------------|:----------|:---------------------------------|----------------:|
| order_item_id | UUID (PK) | Уникальный идентификатор позиции |              16 |
| order_id      | UUID      | Идентификатор заказа             |              16 |
| product_id    | UUID      | Идентификатор товара             |              16 |
| product_name  | VARCHAR   | Название товара                  |             100 |
| product_image | VARCHAR   | Ссылка на изображение            |             200 |
| unit_price    | DECIMAL   | Цена за единицу                  |               8 |
| quantity      | INTEGER   | Количество                       |               4 |
| total_price   | DECIMAL   | Общая цена                       |               8 |

**Итого:** 368 байт на запись


---

#### Таблица `cart_items` (Корзина)

**Назначение:** Хранение содержимого корзины пользователей

**СУБД:** PostgreSQL / Redis

**Индексы:**

- PRIMARY KEY (`cart_item_id`)
- INDEX (`user_id`)
- INDEX (`product_id`)

| Поле         | Тип       | Описание                   |   Размер (байт) |
|:-------------|:----------|:---------------------------|----------------:|
| cart_item_id | UUID (PK) | Уникальный идентификатор   |              16 |
| user_id      | UUID      | Идентификатор пользователя |              16 |
| product_id   | UUID      | Идентификатор товара       |              16 |
| product_name | VARCHAR   | Название товара            |             100 |
| unit_price   | DECIMAL   | Цена товара                |               8 |
| quantity     | INTEGER   | Количество                 |               4 |
| added_at     | TIMESTAMP | Дата добавления            |               8 |

**Итого:** 168 байт на запись


---

#### Таблица `reviews` (Отзывы)

**Назначение:** Отзывы пользователей на товары

**СУБД:** Cassandra 

**Индексы:**

- PRIMARY KEY (`review_id`)
- INDEX (`product_id`)
- INDEX (`user_id`)
- INDEX (`seller_id`)

| Поле        | Тип       | Описание                        |   Размер (байт) |
|:------------|:----------|:--------------------------------|----------------:|
| review_id   | UUID (PK) | Уникальный идентификатор отзыва |              16 |
| user_id     | UUID      | Идентификатор пользователя      |              16 |
| seller_id   | UUID      | Идентификатор продавца          |              16 |
| product_id  | UUID      | Идентификатор товара            |              16 |
| order_id    | UUID      | Идентификатор заказа            |              16 |
| rating      | INTEGER   | Оценка                          |               4 |
| title       | VARCHAR   | Заголовок                       |              50 |
| comment     | TEXT      | Комментарий                     |             500 |
| images      | VARCHAR[] | Массив ссылок на изображения    |             200 |
| is_verified | BOOLEAN   | Подтвержденная покупка          |               1 |
| created_at  | TIMESTAMP | Дата создания                   |               8 |

**Итого:** 843 байт на запись
